# Configuration file for a mixer.
#
# This is an example configuration file for the mixer, for production
# it is automatically generated by Ansible from a list of machines.

instance_type: "mixer"

# Whether or not to fail connections to workers fast; this is
# typically set to true in unit tests where we don't want to wait 5
# minutes.
backoff_fail_fast: false

correlator:
  # Two points close enough in time will be considers at the same
  # moment, this shouldn't be relied on a lot, the client should
  # synchronize clocks (using GPS time) so that they fetch points at
  # around the same moment, doing so on the client increases the
  # accuracy as moving users can be correlated.
  nearby_seconds: 30

  # About 4.4 meters (this is the precision of GPS coordinates).
  nearby_gps_distance: 0.000004

network:
  host: 127.0.0.1
  port: 8000

shards:
  - name: "8a00862"
    workers: ['gamgee:7000', 'bombadil:7000']
  - name: "eb3e451"
    workers: ['gamgee:7001', 'treebeard:7001']
  - name: "735ec68"
    workers: ['treebeard:7002', 'bombadil:7002']

partitions:
  - at: 0
    shards:
    - shard: "8a00862"
      area: "default"
    - shard: "eb3e451"
      area: "fr"
      bottom_left: [44.0, -5.0]
      top_right: [47.5, 7.5]
    - shard: "735ec68"
      area: "fr"
      bottom_left: [47.5, -5.0]
      top_right: [47.5, 7.5]
